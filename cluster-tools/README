=============================================================================
Jahia Cluster Tools
=============================================================================

Example command line :

java -jar target/cluster-tools-2.2-with-deps.jar cluster

Setup
-----------------------------------------------------------------------------

We assume in the above command line that we have the following files in the
cluster/ sub-directory:

  cluster.properties
  clustertests-virginia.pem
  templates/

Here is an example of the contents of a cluster.properties file contents :

numberOfNodes=10
nodeNamePrefix=jahiaServer
externalHostNames=server1,server2,server3,server4,server5,server6,server7,server8,server9,server10
internalIPs=10.0.1.1,10.0.1.2,10.0.1.3,10.0.1.4,10.0.1.5,10.0.1.6,10.0.1.7,10.0.1.8,10.0.1.9,10.0.1.10

privateKeyFileLocation=privatekey.pem
deploymentUserName=ec2-user
deploymentTargetPath=/home/ec2-user/Jahia

jahiaAdvancedPropertyRelativeFileLocation=tomcat/webapps/ROOT/WEB-INF/etc/config/jahia.advanced.properties
templateDirectoryName=template
nodesDirectoryName=nodes

waitForStartupURL=http://${hostname}:8080/welcome
startupCommandLine=/home/ec2-user/Jahia/tomcat/bin/startup.sh
shutdownCommandLine=/home/ec2-user/Jahia/tomcat/bin/shutdown.sh
getPidCommandLine=cat /home/ec2-user/Jahia/tomcat/temp/tomcat.pid
psCommandLine=ps aux | grep bootstrap.jar
killCommandLine=kill ${tomcatpid}
hardKillCommandLine=kill -9 ${tomcatpid}

Template directory
-----------------------------------------------------------------------------

The template directory may contain any files that will be copied over to the
nodes. It must also contain a jahia.advanced.properties files specified at
the location in the jahiaAdvancedPropertiesRelativeFileLocation in the
cluster.properties file. This file will be modified for each cluster node
according to the configuration.

Example project
-----------------------------------------------------------------------------

In the cluster.example directory you will see a sample project. You can then
use the project by adding the private key file and launching for example
with the command :

java -jar target/cluster-tools-2.2-with-deps.jar cluster.example
